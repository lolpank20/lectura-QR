<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tienda Demo - Catálogo</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header style="display:flex;align-items:center;justify-content:space-between;gap:24px;">
    <div style="display:flex;align-items:center;gap:18px;">
      <img src="img/logoavvillas.jpg" alt="Banco AV Villas" style="height:60px;vertical-align:middle;">
      <h1 style="display:inline; margin-left:0;">Tienda Demo</h1>
    </div>
    <a href="cart.html" title="Ver carrito" style="margin-right:24px;">
      <img src="img/cart.svg" alt="Carrito" style="height:38px;width:38px;vertical-align:middle;filter:drop-shadow(0 2px 4px #0055a4aa);">
    </a>
  </header>
  <nav>
    <a href="index.html">Catálogo</a>
    <a href="cart.html">Carrito</a>
  </nav>
  <div class="container">
    <h2>Catálogo de Productos</h2>
    <div id="product-list"></div>
  </div>
  <script>
    const products = [
      {id:1, name:'Camiseta Roja', price:35000, img:'https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=400&q=80'},
      {id:2, name:'Gorra Azul', price:22000, img:'https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80'},
      {id:3, name:'Termo Blanco', price:28000, img:'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80'},
      {id:4, name:'Mug Edición Especial', price:18000, img:'https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=400&q=80'}
    ];
    function renderProducts() {
      const list = document.getElementById('product-list');
      list.innerHTML = '';
      let cart = JSON.parse(localStorage.getItem('cart')||'[]');
      products.forEach(p => {
        const div = document.createElement('div');
        div.style.display = 'flex';
        div.style.alignItems = 'center';
        div.style.marginBottom = '22px';
        div.style.background = '#f2f6fa';
        div.style.borderRadius = '8px';
        div.style.boxShadow = '0 2px 8px rgba(0,85,164,0.07)';
        div.style.padding = '12px 18px';
        const cartItem = cart.find(i=>i.id===p.id);
        let control = '';
        if(cartItem) {
          control = `<div style='display:flex;align-items:center;gap:8px;'>
            <button class="btn" style="padding:4px 12px;min-width:32px;" onclick="updateQty(${p.id},-1)">-</button>
            <span style='font-size:1.1em;width:32px;display:inline-block;text-align:center;'>${cartItem.qty}</span>
            <button class="btn" style="padding:4px 12px;min-width:32px;" onclick="updateQty(${p.id},1)">+</button>
          </div>`;
        } else {
          control = `<button class="btn" onclick="addToCart(${p.id})">Añadir</button>`;
        }
        div.innerHTML = `
          <img src="${p.img}" class="product-img" alt="${p.name}">
          <div style="flex:1; margin-left:18px;">
            <b style='font-size:1.1em;'>${p.name}</b><br>
            <span style="color:#e10600; font-size:1.2em;">$${p.price.toLocaleString()}</span>
          </div>
          ${control}
        `;
        list.appendChild(div);
      });
    }
    function addToCart(id) {
      let cart = JSON.parse(localStorage.getItem('cart')||'[]');
      const idx = cart.findIndex(i=>i.id===id);
      if(idx>-1) cart[idx].qty++;
      else cart.push({id, qty:1});
      localStorage.setItem('cart', JSON.stringify(cart));
      renderProducts();
    }
    function updateQty(id, delta) {
      let cart = JSON.parse(localStorage.getItem('cart')||'[]');
      const idx = cart.findIndex(i=>i.id===id);
      if(idx>-1) {
        cart[idx].qty += delta;
        if(cart[idx].qty<=0) cart.splice(idx,1);
        localStorage.setItem('cart', JSON.stringify(cart));
        renderProducts();
      }
    }
    renderProducts();
    // Modal para mensajes visuales
    function showModal(msg) {
      let modal = document.getElementById('modalMsg');
      if(!modal) {
        modal = document.createElement('div');
        modal.id = 'modalMsg';
        modal.innerHTML = `<div class='modal-bg'></div><div class='modal-content'><span class='modal-close'>&times;</span><div id='modalText'></div></div>`;
        document.body.appendChild(modal);
        modal.querySelector('.modal-close').onclick = () => modal.style.display = 'none';
        modal.querySelector('.modal-bg').onclick = () => modal.style.display = 'none';
      }
      document.getElementById('modalText').innerHTML = msg;
      modal.style.display = 'flex';
    }
  </script>
  <style>
    .modal-bg {
      position: fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.25); z-index:1000;
    }
    .modal-content {
      position: fixed; left:50%; top:50%; transform:translate(-50%,-50%); background:#fff; border-radius:12px; box-shadow:0 8px 32px rgba(0,0,0,0.18); padding:32px 40px; z-index:1001; min-width:320px; max-width:90vw;
      display:flex; flex-direction:column; align-items:center;
    }
    .modal-close {
      position:absolute; right:18px; top:12px; font-size:2em; color:#e10600; cursor:pointer; font-weight:bold;
    }
    #modalMsg { display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; align-items:center; justify-content:center; }
  </style>
</body>
</html>
